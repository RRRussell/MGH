*******************************************************************************************
该项目由两部分组成：检测模块和假阳性降低模块
检测模块在DeepBrain文件夹中，假阳性降低模块在FP_Reduction中
*******************************************************************************************
在服务器上运行train_detector.sbatch文件即可开始训练检测模块，运行test_detector.sbatch即可对检测模块进行测试
train_mrn_list.txt记录了用于训练的病人的mrn，test_mrn_list.txt记录了用于测试的病人的mrn
slurm-181573.out和slurm-181698.out文件记录了检测模块的训练过程，slurm-182132.out记录了使用训练1100轮模型的测试结果
（可以看到性能还是很好的）
*******************************************************************************************
DeepBrain：
该目录下的detector保存的是训练代码，test_detector保存的是测试代码
draw_pbb.py是将预测的结果绘制在CT图中并保存为dicom文件作为输出
label.py是为了查看预处理的结果是否正确，检测无误后不需要再次运行

检测模块中需要关注的文件是：
main.py：程序入口，分别实现了训练和测试（位于detector和test_detector文件夹中）
data.py：对数据进一步的预处理（train和test的处理方式完全不同），实现了标签的制作
layers.py：定义了loss的计算，如何进行坐标转换，nms，准确度计算等相关操作
split_combine.py：实现了如何对CT图进行切割以及切割后如何拼接为原图
dpn3d26.py：定义了检测模型的结构
*******************************************************************************************
FP_Reduction：
假阳性降低模块需要关注的文件是：
dzh_preprocess.py：读取检测模块生成的pbb文件，从原始CT图中挖取出不同大小的正方体，用于该模块的训练和测试
main.py：程序入口，决定训练哪个模型
model.py：定义了训练过程和三种CNN的结构
test_model.py：选择某一模型进行测试
ckpt-1/2/3是三个CNN训练时保存的文件
DeepBrain_FP_1/2/3.csv是三个CNN测试时生成的结果，可用于后续评估
*******************************************************************************************
如何评估？
评估代码位于./DeepBrain/test_detector/80_20_hard/中
运行Create_csv.py将bbox中的npy文件生成为评估代码需要的csv文件
然后进入evaluationScript文件夹
运行noduleCADEvaluationLUNA16.py
就可以得到FROC曲线啦
这里需要注意的是：
如果是要评估经过FP模块的结果，要把FP模块生成的csv文件复制到dzh_annotations文件夹中
如DeepBrain_FP_1.csv，表示经过第一个CNN FP的输出
如果想结合三个CNN得到最终的结果，需运行Combine_csv.py来得到DeepBrain_FP_combine.csv
可以通过调节Combine_csv.py中三个CNN的比例大小来对不同大小的肿瘤进行侧重
*******************************************************************************************
